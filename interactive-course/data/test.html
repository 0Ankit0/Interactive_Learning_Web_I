<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Data Loading Test</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
      }
      .test-section {
        margin: 20px 0;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 8px;
      }
      .success {
        border-color: #28a745;
        background-color: #d4edda;
      }
      .error {
        border-color: #dc3545;
        background-color: #f8d7da;
      }
      .loading {
        border-color: #ffc107;
        background-color: #fff3cd;
      }
      pre {
        background: #f8f9fa;
        padding: 10px;
        border-radius: 4px;
        overflow-x: auto;
      }
    </style>
  </head>
  <body>
    <h1>JSON Data Loading Test</h1>

    <div id="quiz-test" class="test-section">
      <h3>Quiz Data Test</h3>
      <div id="quiz-status">Loading quiz data...</div>
      <div id="quiz-content"></div>
    </div>

    <div id="config-test" class="test-section">
      <h3>Configuration Data Test</h3>
      <div id="config-status">Loading configuration...</div>
      <div id="config-content"></div>
    </div>

    <div id="content-test" class="test-section">
      <h3>Content Data Test</h3>
      <div id="content-status">Loading content data...</div>
      <div id="content-content"></div>
    </div>

    <script src="../dist/js/data-loader.js"></script>
    <script>
      // Test quiz data loading
      async function testQuizData() {
        const statusDiv = document.getElementById("quiz-status");
        const contentDiv = document.getElementById("quiz-content");

        try {
          statusDiv.textContent = "Loading quiz data...";
          statusDiv.className = "loading";

          const quizData = await dataLoader.loadQuizQuestions(
            "js-introduction"
          );

          statusDiv.textContent = `✅ Successfully loaded ${quizData.length} quiz questions`;
          statusDiv.className = "success";

          contentDiv.innerHTML = `
                    <p><strong>Sample Question:</strong> ${
                      quizData[0].question
                    }</p>
                    <p><strong>Options:</strong> ${quizData[0].options.join(
                      ", "
                    )}</p>
                    <p><strong>Correct Answer:</strong> ${
                      quizData[0].options[quizData[0].correct]
                    }</p>
                `;
        } catch (error) {
          statusDiv.textContent = `❌ Error loading quiz data: ${error.message}`;
          statusDiv.className = "error";
          contentDiv.textContent = "";
        }
      }

      // Test configuration data loading
      async function testConfigData() {
        const statusDiv = document.getElementById("config-status");
        const contentDiv = document.getElementById("config-content");

        try {
          statusDiv.textContent = "Loading configuration...";
          statusDiv.className = "loading";

          const configData = await dataLoader.loadConfig();

          statusDiv.textContent = "✅ Successfully loaded configuration";
          statusDiv.className = "success";

          contentDiv.innerHTML = `
                    <p><strong>Intersection Observer Threshold:</strong> ${configData.intersectionObserver.threshold}</p>
                    <p><strong>Animation Duration:</strong> ${configData.animations.duration.normal}ms</p>
                    <p><strong>UI Breakpoint:</strong> ${configData.ui.mobileBreakpoint}px</p>
                `;
        } catch (error) {
          statusDiv.textContent = `❌ Error loading configuration: ${error.message}`;
          statusDiv.className = "error";
          contentDiv.textContent = "";
        }
      }

      // Test content data loading
      async function testContentData() {
        const statusDiv = document.getElementById("content-status");
        const contentDiv = document.getElementById("content-content");

        try {
          statusDiv.textContent = "Loading content data...";
          statusDiv.className = "loading";

          const contentData = await dataLoader.loadContent();

          statusDiv.textContent = "✅ Successfully loaded content data";
          statusDiv.className = "success";

          contentDiv.innerHTML = `
                    <p><strong>Success Message:</strong> ${
                      contentData.messages.success.formSubmitted
                    }</p>
                    <p><strong>Error Message:</strong> ${
                      contentData.messages.error.formValidation
                    }</p>
                    <p><strong>HTML Example:</strong></p>
                    <pre>${contentData.demoContent.htmlExamples.basicStructure.substring(
                      0,
                      100
                    )}...</pre>
                `;
        } catch (error) {
          statusDiv.textContent = `❌ Error loading content data: ${error.message}`;
          statusDiv.className = "error";
          contentDiv.textContent = "";
        }
      }

      // Run all tests
      document.addEventListener("DOMContentLoaded", function () {
        testQuizData();
        testConfigData();
        testContentData();
      });
    </script>
  </body>
</html>
